{"version":3,"sources":["scripts/main.js"],"names":["body","document","thead","querySelector","titles","querySelectorAll","tbody","employes","rows","form","createElement","success","error","clickedTitle","prevEmployeeName","notificationMessage","cellIsClicked","convertToNumber","string","replace","convertString","arr","newString","split","value","toUpperCase","slice","toLowerCase","trim","convertSalary","showNotification","condition","message","oldNotification","remove","notification","notificationTitle","notificationDescription","id","className","setAttribute","textContent","append","setTimeout","checkNameValidity","length","checkAgeValidity","age","getItemIndex","collection","item","indexOf","addEventListener","e","title","target","closest","sortedTbody","titleIndex","sortedEmployes","sort","prev","current","prevText","children","currentText","localeCompare","innerHTML","tr","employee","classList","toggle","insertAdjacentHTML","preventDefault","data","FormData","dataObject","Object","fromEntries","entries","fullName","name","position","office","salary","td","input","cloneNode","oldText","focus","onblur","anEvent","key"],"mappings":"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","file":"main.09c8af3c.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.body;\nconst thead = document.querySelector('thead');\nconst titles = thead.querySelectorAll('th');\nconst tbody = document.querySelector('tbody');\nconst employes = tbody.rows;\nconst form = document.createElement('form');\nconst success = 'success';\nconst error = 'error';\nlet clickedTitle = null;\nlet prevEmployeeName = '';\nlet notificationMessage = '';\nlet cellIsClicked = false;\n\nform.className = 'new-employee-form';\n\n// Сортування списку\nthead.addEventListener('click', e => {\n  const title = e.target.closest('th');\n  const sortedTbody = document.createElement('tbody');\n  const titleIndex = getItemIndex(titles, title);\n\n  const sortedEmployes = [...employes].sort((prev, current) => {\n    const prevText = prev.children[titleIndex].textContent;\n    const currentText = current.children[titleIndex].textContent;\n\n    if (title.textContent === 'Age' || title.textContent === 'Salary') {\n      return (clickedTitle === title)\n        ? convertToNumber(currentText) - convertToNumber(prevText)\n        : convertToNumber(prevText) - convertToNumber(currentText);\n    }\n\n    return (clickedTitle === title)\n      ? currentText.localeCompare(prevText)\n      : prevText.localeCompare(currentText);\n  });\n\n  sortedTbody.append(...sortedEmployes);\n  tbody.innerHTML = sortedTbody.innerHTML;\n\n  clickedTitle = (clickedTitle === title)\n    ? null\n    : title;\n});\n\n// Виділення працівника\ntbody.addEventListener('click', e => {\n  const tr = e.target.closest('tr');\n\n  for (const employee of employes) {\n    if (employee.children[0].textContent === prevEmployeeName) {\n      employee.classList.toggle('active');\n    }\n  }\n\n  tr.classList.toggle('active');\n  prevEmployeeName = tr.children[0].textContent;\n});\n\n// Додавання форми\nform.insertAdjacentHTML('afterbegin', `\n  <label>\n    Name:\n    <input name=\"name\" type=\"text\" data-qa=\"name\" required>\n  </label>\n\n  <label>\n    Position:\n    <input name=\"position\" type=\"text\" data-qa=\"name\" required>\n  </label>\n\n  <label>\n    Office:\n    <select name=\"office\" data-qa=\"office\" required>\n      <option value=\"tokyo\">\n        Tokyo\n      </option>\n      <option value=\"singapore\">\n        Singapore\n      </option>\n      <option value=\"london\">\n        London\n      </option>\n      <option value=\"new york\">\n        New York\n      </option>\n      <option value=\"edinburgh\">\n        Edinburgh\n      </option>\n      <option value=\"san francisco\">\n        San Francisco \n      </option>\n    </select>\n  </label>\n\n  <label>\n    Age:\n    <input name=\"age\" type=\"number\" data-qa=\"age\" required>\n  </label>\n\n  <label>\n    Salary:\n    <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n  </label>\n\n  <button>Save to table</button>\n`);\nbody.append(form);\n\n// Додавання нового працівника\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const data = new FormData(form);\n  const dataObject = Object.fromEntries(data.entries());\n  const fullName = convertString(dataObject.name);\n  const position = convertString(dataObject.position);\n  const office = convertString(dataObject.office);\n  const age = dataObject.age;\n  const salary = convertSalary(dataObject.salary);\n\n  if (checkNameValidity(fullName) || !checkAgeValidity(age)) {\n    return;\n  }\n\n  tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${fullName}</td>\n      <td>${position}</td>\n      <td>${office}</td>\n      <td>${age}</td>\n      <td>${salary}</td>\n    </tr>\n  `);\n\n  notificationMessage = 'New employee added!';\n  showNotification(success, notificationMessage);\n});\n\n// Редагування списку\ntbody.addEventListener('dblclick', e => {\n  const tr = e.target.closest('tr');\n  const td = e.target.closest('td');\n  const labels = document.querySelectorAll('label');\n  const itemIndex = getItemIndex(tr.children, td);\n\n  const input = labels[itemIndex].children[0].cloneNode(true);\n\n  input.className = 'cell-input';\n\n  const oldText = (input.name === 'salary')\n    ? td.textContent.replace(/\\D/g, '')\n    : td.textContent;\n\n  if (cellIsClicked === false) {\n    cellIsClicked = true;\n    td.textContent = '';\n    input.value = oldText;\n    td.append(input);\n\n    input.focus();\n\n    input.onblur = function() {\n      switch (true) {\n        case input.value === '':\n          td.textContent = oldText;\n          break;\n\n        case input.name === 'name':\n          if (checkNameValidity(input.value)) {\n            td.textContent = oldText;\n            break;\n          }\n          td.textContent = convertString(input.value);\n          break;\n\n        case input.name === 'position':\n        case input.name === 'office':\n          td.textContent = convertString(input.value);\n          break;\n\n        case input.name === 'age':\n          if (!checkAgeValidity(input.value)) {\n            td.textContent = oldText;\n            break;\n          }\n          td.textContent = input.value;\n          break;\n\n        case input.name === 'salary':\n          td.textContent = convertSalary(input.value);\n      };\n      cellIsClicked = false;\n      input.remove();\n    };\n  }\n\n  input.addEventListener('keydown', anEvent => {\n    if (anEvent.key === 'Enter') {\n      input.onblur();\n    }\n  });\n});\n\n// Функції\n\nfunction convertToNumber(string) {\n  return +string.replace(/\\D/g, '');\n}\n\nfunction convertString(string) {\n  const arr = string.split(' ');\n  let newString = '';\n\n  for (const value of arr) {\n    if (value !== '') {\n      newString += value[0].toUpperCase() + value.slice(1).toLowerCase() + ' ';\n    }\n  }\n\n  return newString.trim();\n}\n\nfunction convertSalary(string) {\n  return `$${string.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}`;\n}\n\nfunction showNotification(condition, message) {\n  const oldNotification = body.querySelector('#notification');\n\n  if (oldNotification) {\n    oldNotification.remove();\n  }\n\n  const notification = document.createElement('div');\n  const notificationTitle = document.createElement('h2');\n  const notificationDescription = document.createElement('p');\n\n  notification.id = 'notification';\n  notification.className = `notification ${condition}`;\n  notification.setAttribute('data-qa', 'notification');\n  notificationTitle.className = 'title';\n  notificationTitle.textContent = convertString(condition);\n  notificationDescription.textContent = message;\n  notification.append(notificationTitle, notificationDescription);\n  body.append(notification);\n  setTimeout(() => notification.remove(), 3000);\n}\n\nfunction checkNameValidity(value) {\n  if (value.length < 4) {\n    notificationMessage = 'Name must contain more than three letters!';\n    showNotification(error, notificationMessage);\n\n    return true;\n  }\n}\n\nfunction checkAgeValidity(age) {\n  if (+age < 18) {\n    notificationMessage = 'The employee must be over than 18 years old!';\n    showNotification(error, notificationMessage);\n\n    return false;\n  }\n\n  if (+age > 90) {\n    notificationMessage = 'The employee must be under than 90 years of age!';\n    showNotification(error, notificationMessage);\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction getItemIndex(collection, item) {\n  return [...collection].indexOf(item);\n}\n"]}